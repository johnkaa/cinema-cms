(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b542dd8"],{"0dc3":function(t,e,a){"use strict";a("505e")},"505e":function(t,e,a){},"6b23":function(t,e,a){"use strict";var s=a("7a23"),c={class:"close-btn"};function n(t,e,a,n,i,o){return Object(s["z"])(),Object(s["g"])("button",c,"x")}var i={name:"MyCloseButton"},o=(a("e991"),a("6b0d")),d=a.n(o);const u=d()(i,[["render",n],["__scopeId","data-v-7b00fafe"]]);e["a"]=u},"6ea2":function(t,e,a){"use strict";a("7a49")},"733a":function(t,e,a){"use strict";a("9fe5")},"7a49":function(t,e,a){},"9fe5":function(t,e,a){},b866:function(t,e,a){"use strict";var s=a("7a23"),c={class:"my-btn border-button"};function n(t,e,a,n,i,o){return Object(s["z"])(),Object(s["g"])("button",c,[Object(s["G"])(t.$slots,"default",{},void 0,!0)])}var i={name:"MyButton"},o=(a("0dc3"),a("6b0d")),d=a.n(o);const u=d()(i,[["render",n],["__scopeId","data-v-27e5dabb"]]);e["a"]=u},cb01:function(t,e,a){"use strict";a.r(e);a("a4d3"),a("e01a");var s=a("7a23"),c=function(t){return Object(s["C"])("data-v-c1637474"),t=t(),Object(s["A"])(),t},n={class:"pages-edit-contacts"},i={class:"switch__wrapper"},o={class:"switch"},d={class:"switch__label"},u=c((function(){return Object(s["h"])("span",{class:"lever"},null,-1)})),l=c((function(){return Object(s["h"])("span",{class:"plus"},"+",-1)})),r=Object(s["j"])("Добавить контакт"),h={class:"pages-edit__seo"},g=c((function(){return Object(s["h"])("span",null,"SEO блок:",-1)})),m={class:"pages-edit__seo-item"},b=c((function(){return Object(s["h"])("span",null,"URL:",-1)})),p={class:"pages-edit__seo-item"},f=c((function(){return Object(s["h"])("span",null,"Title:",-1)})),O={class:"pages-edit__seo-item"},j=c((function(){return Object(s["h"])("span",null,"Keywords:",-1)})),C={class:"pages-edit__seo-item"},v=c((function(){return Object(s["h"])("span",null,"Description:",-1)})),I=Object(s["j"])("Сохранить"),_={key:0,class:"info text-success"};function y(t,e,a,c,y,P){var k=Object(s["H"])("pages-contacts-item"),S=Object(s["H"])("my-button");return Object(s["z"])(),Object(s["g"])("div",n,[Object(s["h"])("div",i,[Object(s["h"])("div",o,[Object(s["h"])("label",d,[Object(s["R"])(Object(s["h"])("input",{class:"switch__checkbox",type:"checkbox",onChange:e[0]||(e[0]=function(){return P.setLanguage&&P.setLanguage.apply(P,arguments)}),"onUpdate:modelValue":e[1]||(e[1]=function(t){return y.ua=t})},null,544),[[s["L"],y.ua]]),u])])]),(Object(s["z"])(!0),Object(s["g"])(s["a"],null,Object(s["F"])(y.contacts,(function(t,e){return Object(s["z"])(),Object(s["e"])(k,{key:e,contact:t,items:y.contacts,ua:y.ua,onUpdate:P.updateContactsItem,onDelete:P.deleteContactsItem},null,8,["contact","items","ua","onUpdate","onDelete"])})),128)),Object(s["k"])(S,{class:"pages-edit-contacts__add plus__btn",onClick:P.addContactsItem},{default:Object(s["Q"])((function(){return[l,r]})),_:1},8,["onClick"]),Object(s["h"])("div",h,[g,Object(s["h"])("form",null,[Object(s["h"])("div",m,[b,Object(s["R"])(Object(s["h"])("input",{type:"text",placeholder:"URL","onUpdate:modelValue":e[2]||(e[2]=function(t){return y.seo.url=t})},null,512),[[s["O"],y.seo.url]])]),Object(s["h"])("div",p,[f,Object(s["R"])(Object(s["h"])("input",{type:"text",placeholder:"Title","onUpdate:modelValue":e[3]||(e[3]=function(t){return y.seo.title=t})},null,512),[[s["O"],y.seo.title]])]),Object(s["h"])("div",O,[j,Object(s["R"])(Object(s["h"])("input",{type:"text",placeholder:"Keywords","onUpdate:modelValue":e[4]||(e[4]=function(t){return y.seo.keywords=t})},null,512),[[s["O"],y.seo.keywords]])]),Object(s["h"])("div",C,[v,Object(s["R"])(Object(s["h"])("textarea",{placeholder:"Description","onUpdate:modelValue":e[5]||(e[5]=function(t){return y.seo.description=t})},null,512),[[s["O"],y.seo.description]])])])]),Object(s["k"])(S,{class:"pages-edit__btn",onClick:P.submit},{default:Object(s["Q"])((function(){return[I]})),_:1},8,["onClick"]),this.uploaded?(Object(s["z"])(),Object(s["g"])("p",_,"Изменения сохранены")):Object(s["f"])("",!0)])}a("b0c0"),a("b64b");var P=function(t){return Object(s["C"])("data-v-6d8c418e"),t=t(),Object(s["A"])(),t},k={class:"pages-contacts"},S={class:"pages-contacts__name"},w=P((function(){return Object(s["h"])("span",null,"Название кинотеатра",-1)})),U={class:"pages-contacts__address"},x=P((function(){return Object(s["h"])("span",null,"Адрес",-1)})),F={class:"pages-contacts__cords"},R=P((function(){return Object(s["h"])("span",null,"Координаты для карты",-1)})),E={class:"pages-contacts__logo"},V=P((function(){return Object(s["h"])("span",null,"Логотип",-1)})),z=["src"],D=Object(s["j"])("Удалить");function L(t,e,a,c,n,i){var o=Object(s["H"])("my-close-button"),d=Object(s["H"])("my-button");return Object(s["z"])(),Object(s["g"])("div",k,[Object(s["k"])(o,{class:"pages-contacts__delete",onClick:i.deleteItem},null,8,["onClick"]),Object(s["h"])("div",S,[w,Object(s["R"])(Object(s["h"])("input",{type:"text",placeholder:"Название кинотеатра","onUpdate:modelValue":e[0]||(e[0]=function(t){return n.name=t}),onChange:e[1]||(e[1]=function(){return i.updateContactsItem&&i.updateContactsItem.apply(i,arguments)})},null,544),[[s["O"],n.name]])]),Object(s["h"])("div",U,[x,Object(s["R"])(Object(s["h"])("textarea",{placeholder:"Адресс","onUpdate:modelValue":e[2]||(e[2]=function(t){return n.address=t}),onChange:e[3]||(e[3]=function(){return i.updateContactsItem&&i.updateContactsItem.apply(i,arguments)})},null,544),[[s["O"],n.address]])]),Object(s["h"])("div",F,[R,Object(s["R"])(Object(s["h"])("input",{type:"text",placeholder:"Координаты","onUpdate:modelValue":e[4]||(e[4]=function(t){return n.cords=t}),onChange:e[5]||(e[5]=function(){return i.updateContactsItem&&i.updateContactsItem.apply(i,arguments)})},null,544),[[s["O"],n.cords]])]),Object(s["h"])("div",E,[V,Object(s["h"])("img",{src:n.img,alt:"",onClick:e[6]||(e[6]=function(){return i.onPickFile&&i.onPickFile.apply(i,arguments)})},null,8,z),Object(s["h"])("input",{id:"inputFile",type:"file",style:{display:"none"},ref:"fileInput",accept:"image/*",onChange:e[7]||(e[7]=function(){return i.onFilePicked&&i.onFilePicked.apply(i,arguments)})},null,544),Object(s["k"])(d,{onClick:i.deleteLogo},{default:Object(s["Q"])((function(){return[D]})),_:1},8,["onClick"])])])}var A=a("5530"),B=a("b866"),H=a("6b23"),M=a("5502"),$={name:"PagesContactsItem",components:{MyCloseButton:H["a"],MyButton:B["a"]},computed:Object(M["c"])(["getStatePages","getStatePagesContactsEdit"]),props:["contact","items","ua"],watch:{ua:function(){this.setupContactsItem()}},data:function(){return{name:this.contact.name,address:this.contact.address,cords:this.contact.cords,img:this.contact.img,file:null}},methods:Object(A["a"])(Object(A["a"])({},Object(M["d"])(["uploadFilePagesContactsImg","getFileUrlContacts","deleteFilePagesContactsImg"])),{},{updateContactsItem:function(){var t=this;this.getStatePagesContactsEdit.img="";var e=setInterval((function(){t.getFileUrlContacts({id:t.contact.id}),t.getStatePagesContactsEdit.img&&clearInterval(e)}),250);this.$emit("update",{id:this.contact.id,name:this.name,address:this.address,cords:this.cords,img:this.img})},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(t){var e=this,a=t.target.files,s=new FileReader;this.file=a[0];var c=a[0].name;if(c.indexOf(".")<=0)return alert("Please add a valid file");s.readAsDataURL(a[0]),this.uploadFilePagesContactsImg({id:this.contact.id,file:this.file,ua:this.ua}),this.getStatePagesContactsEdit.img="",this.getStatePagesContactsEdit.imgUa="",this.img="https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g",setTimeout((function(){var t=setInterval((function(){e.getFileUrlContacts({id:e.contact.id,ua:e.ua}),e.getStatePagesContactsEdit.img&&clearInterval(t),e.ua&&e.getStatePagesContactsEdit.imgUa&&clearInterval(t)}),250)}),1e3),setTimeout((function(){e.ua?e.img=e.getStatePagesContactsEdit.imgUa:e.img=e.getStatePagesContactsEdit.img,e.updateContactsItem()}),2e3)},deleteItem:function(){if(1===Object.keys(this.items).length)return alert("Должен быть хотя бы 1 контакт");this.$emit("delete",this.contact.id),this.deleteFilePagesContactsImg({id:this.contact.id})},deleteLogo:function(){this.img="https://via.placeholder.com/250"},setupContactsItem:function(){if(this.ua){var t=this.getStatePages.database[2].ua.contacts[this.contact.id];this.name=t.name,this.address=t.address,this.cords=t.cords,this.img=t.img}else{var e=this.getStatePages.database[2].contacts[this.contact.id];this.name=e.name,this.address=e.address,this.cords=e.cords,this.img=e.img}}})},T=(a("733a"),a("6b0d")),Q=a.n(T);const J=Q()($,[["render",L],["__scopeId","data-v-6d8c418e"]]);var K=J,q=a("66ce"),G=a("ab55"),X={name:"PagesContactsEdit",components:{MyButton:B["a"],PagesContactsItem:K},computed:Object(M["c"])(["getStatePages"]),mounted:function(){if(this.setupPageContacts(),Array.isArray(this.contacts)){for(var t={},e=0;e<this.contacts.length;e++)t[e]={id:e,name:this.contacts[e].name,address:this.contacts[e].address,cords:this.contacts[e].cords,img:this.contacts[e].img};this.contacts=t}if(Array.isArray(this.uaItem.contacts)){for(var a={},s=0;s<this.uaItem.contacts.length;s++)a[s]={id:s,name:this.uaItem.contacts[s].name,address:this.uaItem.contacts[s].address,cords:this.uaItem.contacts[s].cords,img:this.uaItem.contacts[s].img};this.uaItem.contacts=a}},data:function(){return{id:2,name:"Контакты",actualValue:"ВКЛ",date:"",contacts:{},seo:{},uploaded:!1,ua:!1,uaItem:{}}},methods:{submit:function(){this.ua?this.getStatePages.database[this.id].ua={id:this.id,name:this.name,contacts:this.contacts,date:this.date,seo:this.seo}:this.getStatePages.database[this.id]={id:this.id,date:this.date,name:this.name,contacts:this.contacts,seo:this.seo,ua:this.uaItem};var t=this.getStatePages.database[this.id];Object(q["d"])(Object(q["c"])(G["a"],"pages/".concat(this.id)),{id:this.id,date:t.date,actualValue:"ВКЛ",name:"Контакты",contacts:t.contacts,seo:t.seo,ua:t.ua}),this.$router.push({path:"/admin/pages"})},addContactsItem:function(){if(Object.keys(this.contacts).length>3)return alert("Больше добавить нельзя");this.contacts[(+new Date-+new Date%100)/100]={id:(+new Date-+new Date%100)/100,name:"",address:"",cords:"",img:"https://via.placeholder.com/250"}},updateContactsItem:function(t){this.contacts[t.id]={id:t.id,name:t.name,address:t.address,cords:t.cords,img:t.img}},deleteContactsItem:function(t){delete this.contacts[t]},setLanguage:function(){if(this.ua){var t=this.getStatePages.database[this.id].ua;this.getStatePages.database[this.id]={id:this.id,date:this.date,contacts:this.contacts,seo:this.seo,ua:this.uaItem},this.date=t.date,this.contacts=t.contacts,this.seo=t.seo}else{var e=this.getStatePages.database[this.id];this.getStatePages.database[this.id].ua={id:this.id,date:this.date,contacts:this.contacts,seo:this.seo},this.date=e.date,this.contacts=e.contacts,this.seo=e.seo,this.uaItem=e.ua}},setupPageContacts:function(){var t=this.getStatePages.database[this.id];console.log(t),this.date=t.date,this.contacts=t.contacts,this.seo=t.seo,this.uaItem=t.ua}}};a("6ea2");const N=Q()(X,[["render",y],["__scopeId","data-v-c1637474"]]);e["default"]=N},e991:function(t,e,a){"use strict";a("f42f")},f42f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5b542dd8.fcb59ef3.js.map