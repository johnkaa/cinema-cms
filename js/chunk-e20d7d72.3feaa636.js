(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e20d7d72"],{"0632":function(e,t,a){"use strict";a("6d2a")},"0dc3":function(e,t,a){"use strict";a("505e")},"505e":function(e,t,a){},"6b23":function(e,t,a){"use strict";var i=a("7a23"),l={class:"close-btn"};function n(e,t,a,n,s,c){return Object(i["z"])(),Object(i["g"])("button",l,"x")}var s={name:"MyCloseButton"},c=(a("e991"),a("6b0d")),u=a.n(c);const r=u()(s,[["render",n],["__scopeId","data-v-7b00fafe"]]);t["a"]=r},"6d2a":function(e,t,a){},"7aaf":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("a4d3"),a("e01a");var i=a("7a23"),l=function(e){return Object(i["C"])("data-v-2b6a6222"),e=e(),Object(i["A"])(),e},n={class:"pages-edit"},s={class:"switch__wrapper"},c={class:"switch__language"},u={class:"switch__label"},r=l((function(){return Object(i["h"])("span",{class:"lever"},null,-1)})),o={class:"switch"},d={class:"pages-edit__name"},g=l((function(){return Object(i["h"])("span",null,"Название страницы",-1)})),h={class:"pages-edit__description"},p=l((function(){return Object(i["h"])("span",null,"Описание",-1)})),m={class:"pages-edit__main-img"},f=l((function(){return Object(i["h"])("span",null,"Главная картинка",-1)})),b=["src"],y=Object(i["j"])("Удалить"),O={class:"pages-edit__gallery"},j=l((function(){return Object(i["h"])("span",null,"Размер: 1000х1900",-1)})),v=Object(i["j"])("+"),I={class:"pages-edit__seo"},k=l((function(){return Object(i["h"])("span",null,"SEO блок:",-1)})),P={class:"pages-edit__seo-item"},_=l((function(){return Object(i["h"])("span",null,"URL:",-1)})),w={class:"pages-edit__seo-item"},x=l((function(){return Object(i["h"])("span",null,"Title:",-1)})),V={class:"pages-edit__seo-item"},G=l((function(){return Object(i["h"])("span",null,"Keywords:",-1)})),F={class:"pages-edit__seo-item"},S=l((function(){return Object(i["h"])("span",null,"Description:",-1)})),R={class:"pages-edit__btns"},C=Object(i["j"])("Сохранить");function D(e,t,a,l,D,U){var E=this,z=Object(i["H"])("my-button"),L=Object(i["H"])("pages-edit-gallery"),B=Object(i["H"])("router-link");return Object(i["z"])(),Object(i["g"])("div",n,[Object(i["h"])("div",s,[Object(i["h"])("div",c,[Object(i["h"])("label",u,[Object(i["R"])(Object(i["h"])("input",{class:"switch__checkbox",type:"checkbox",onChange:t[0]||(t[0]=function(){return U.setLanguage&&U.setLanguage.apply(U,arguments)}),"onUpdate:modelValue":t[1]||(t[1]=function(e){return D.ua=e})},null,544),[[i["L"],D.ua]]),r])])]),Object(i["h"])("div",o,[Object(i["R"])(Object(i["h"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return D.actual=e}),onChange:t[3]||(t[3]=function(){return U.setActual&&U.setActual.apply(U,arguments)})},null,544),[[i["L"],D.actual]])]),Object(i["h"])("div",d,[g,Object(i["R"])(Object(i["h"])("input",{type:"text",placeholder:"Название страницы","onUpdate:modelValue":t[4]||(t[4]=function(e){return D.name=e})},null,512),[[i["O"],D.name]])]),Object(i["h"])("div",h,[p,Object(i["R"])(Object(i["h"])("textarea",{placeholder:"Описание","onUpdate:modelValue":t[5]||(t[5]=function(e){return D.description=e})},null,512),[[i["O"],D.description]])]),Object(i["h"])("div",m,[f,Object(i["h"])("img",{src:D.img,alt:"",onClick:t[6]||(t[6]=function(){return U.onPickFile&&U.onPickFile.apply(U,arguments)})},null,8,b),Object(i["h"])("input",{id:"inputFile",type:"file",style:{display:"none"},ref:"fileInput",accept:"image/*",onChange:t[7]||(t[7]=function(){return U.onFilePicked&&U.onFilePicked.apply(U,arguments)})},null,544),Object(i["k"])(z,{onClick:U.deleteMainImg},{default:Object(i["Q"])((function(){return[y]})),_:1},8,["onClick"])]),Object(i["h"])("div",O,[j,(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["F"])(this.gallery,(function(e){return Object(i["z"])(),Object(i["e"])(L,{key:e.id,gallery:e,id:E.id,items:E.gallery,ref:"gallery",onCreate:U.updateGallery,onDelete:U.deleteGalleryItem},null,8,["gallery","id","items","onCreate","onDelete"])})),128)),Object(i["h"])("input",{class:"add-gallery-item",type:"file",style:{display:"none"},ref:"fileInputGallery",accept:"image/*",onChange:t[8]||(t[8]=function(){return U.addPagesGalleryItemPicked&&U.addPagesGalleryItemPicked.apply(U,arguments)})},null,544),Object(i["k"])(z,{class:"add text-success",onClick:U.addPagesGalleryItem},{default:Object(i["Q"])((function(){return[v]})),_:1},8,["onClick"])]),Object(i["h"])("div",I,[k,Object(i["h"])("form",null,[Object(i["h"])("div",P,[_,Object(i["R"])(Object(i["h"])("input",{type:"text",placeholder:"URL","onUpdate:modelValue":t[9]||(t[9]=function(e){return D.seo.url=e})},null,512),[[i["O"],D.seo.url]])]),Object(i["h"])("div",w,[x,Object(i["R"])(Object(i["h"])("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[10]||(t[10]=function(e){return D.seo.title=e})},null,512),[[i["O"],D.seo.title]])]),Object(i["h"])("div",V,[G,Object(i["R"])(Object(i["h"])("input",{type:"text",placeholder:"Keywords","onUpdate:modelValue":t[11]||(t[11]=function(e){return D.seo.keywords=e})},null,512),[[i["O"],D.seo.keywords]])]),Object(i["h"])("div",F,[S,Object(i["R"])(Object(i["h"])("textarea",{placeholder:"Description","onUpdate:modelValue":t[12]||(t[12]=function(e){return D.seo.description=e})},null,512),[[i["O"],D.seo.description]])])])]),Object(i["h"])("div",R,[Object(i["k"])(B,{to:"/admin/pages"},{default:Object(i["Q"])((function(){return[Object(i["k"])(z,{class:"pages-edit__btns-btn",onClick:U.submit},{default:Object(i["Q"])((function(){return[C]})),_:1},8,["onClick"])]})),_:1})])])}var U=a("5530"),E=a("ade3"),z=(a("9911"),a("b64b"),a("b866")),L=a("5502"),B=a("66ce"),H=a("ab55"),M={class:"pages-edit__gallery-item"},T=["src"];function $(e,t,a,l,n,s){var c=Object(i["H"])("my-close-button");return Object(i["z"])(),Object(i["g"])("div",M,[Object(i["k"])(c,{onClick:s.deleteGalleryItem},null,8,["onClick"]),Object(i["h"])("img",{class:Object(i["r"])(a.gallery.id),src:n.img,alt:"",onClick:t[0]||(t[0]=function(){return s.onPickFileGallery&&s.onPickFileGallery.apply(s,arguments)})},null,10,T),Object(i["h"])("input",{type:"file",style:{display:"none"},ref:"fileInputGallery",accept:"image/*",onChange:t[1]||(t[1]=function(){return s.onFilePickedGallery&&s.onFilePickedGallery.apply(s,arguments)})},null,544)])}var A=a("1da1"),q=(a("96cf"),a("99af"),a("6b23")),Q=a("588e"),X=a("7ac4"),J={name:"PagesEditGallery",components:{MyCloseButton:q["a"]},props:["gallery","id","items"],data:function(){return{img:this.gallery.img}},methods:Object(U["a"])(Object(U["a"])({},Object(L["d"])(["updatePagesGalleryItem","deletePagesGalleryItem"])),{},{uploadFile:function(){var e="pages/".concat(this.id,"/gallery/").concat(this.gallery.id),t=Object(Q["d"])(X["a"],e);Object(Q["e"])(t,this.file)},getFileUrl:function(){var e=this,t="pages/".concat(this.id,"/gallery/").concat(this.gallery.id),a=setInterval(Object(A["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(Q["b"])(Object(Q["d"])(X["a"],t)).then((function(t){t&&(e.img=t)}));case 2:"https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g"!==e.img&&clearInterval(a);case 3:case"end":return i.stop()}}),i)}))),250)},onPickFileGallery:function(){this.$refs.fileInputGallery.click()},onFilePickedGallery:function(e){var t=this,a=e.target.files,i=new FileReader;if(this.file=a[0],this.filename=a[0].name,this.filename.indexOf(".")<=0)return alert("Please add a valid file");i.readAsDataURL(a[0]),this.img="https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g",this.uploadFile(),setTimeout((function(){t.getFileUrl()}),1e3),setTimeout((function(){t.$emit("create",{id:t.gallery.id,img:t.img}),console.log(t.img)}),2e3)},deleteGalleryItem:function(){if(1===Object.keys(this.items).length)return alert("Должна быть хотя бы 1 картинка");this.$emit("delete",{id:this.gallery.id});var e="pages/".concat(this.id,"/gallery/").concat(this.gallery.id),t=Object(Q["d"])(X["a"],e);Object(Q["a"])(t)}})},K=(a("0632"),a("6b0d")),Y=a.n(K);const N=Y()(J,[["render",$],["__scopeId","data-v-20ad395c"]]);var W=N,Z=new Date,ee=Z.getDate()+"."+(Z.getMonth()+1)+"."+Z.getFullYear(),te={name:"PagesEdit",components:{PagesEditGallery:W,MyButton:z["a"]},computed:Object(L["c"])(["getStatePages","getStatePagesEdit"]),mounted:function(){var e=this,t=this.getStatePages.database[this.id];if(t)this.actual=t.actual,this.actualValue=t.actualValue,this.name=t.name,this.description=t.description,this.img=t.img,this.gallery=t.gallery,this.seo=t.seo,this.uaItem=t.ua;else{var a=Object(B["c"])(H["a"],"pages/".concat(this.id));Object(B["b"])(a,(function(a){var i=a.val();i?(e.actual=i.actual,e.actualValue=i.actualValue,e.name=i.name,e.description=i.description,e.img=i.img,e.gallery=i.gallery,e.link=i.link,e.seo=i.seo,e.uaItem=i.ua):(e.getStatePages.database[e.id]={date:ee,actual:!1,actualValue:"ВЫКЛ",name:"Page",description:"",img:"https://via.placeholder.com/400",gallery:Object(E["a"])({},(+new Date-+new Date%100)/100,{id:(+new Date-+new Date%100)/100,img:"https://via.placeholder.com/200"}),seo:{url:"",title:"",keywords:"",description:""},ua:{date:ee,actual:!1,actualValue:"ВЫКЛ",name:"Page",description:"",img:"https://via.placeholder.com/400",gallery:Object(E["a"])({},(+new Date-+new Date%100)/100+5,{id:(+new Date-+new Date%100)/100+5,img:"https://via.placeholder.com/200"}),seo:{url:"",title:"",keywords:"",description:""}}},t=e.getStatePages.database[e.id],e.actual=t.actual,e.actualValue=t.actualValue,e.name=t.name,e.description=t.description,e.img=t.img,e.gallery=t.gallery,e.seo=t.seo,e.uaItem=t.ua)}))}},props:["id"],data:function(){return{actual:!1,actualValue:"ВЫКЛ",name:"Page",description:"",date:ee,img:"https://via.placeholder.com/400",gallery:{},seo:{url:"",title:"",keywords:"",description:""},ua:!1,uaItem:{}}},methods:Object(U["a"])(Object(U["a"])({},Object(L["d"])(["uploadFilePagesImg","getDownloadPagesURL","deleteFilePagesImg"])),{},{submit:function(){this.ua?this.getStatePages.database[this.id].ua={id:this.id,actual:this.actual,actualValue:this.actualValue,name:this.name,description:this.description,img:this.img,gallery:this.gallery,seo:this.seo}:(this.uaItem.actual=this.actual,this.uaItem.actualValue=this.actualValue,this.getStatePages.database[this.id]={id:this.id,actual:this.actual,actualValue:this.actualValue,name:this.name,description:this.description,img:this.img,gallery:this.gallery,seo:this.seo,ua:this.uaItem});var e=this.getStatePages.database[this.id];Object(B["d"])(Object(B["c"])(H["a"],"pages/".concat(this.id)),{id:this.id,date:ee,actual:e.actual,actualValue:e.actualValue,name:e.name,description:e.description,img:e.img,gallery:e.gallery,seo:e.seo,ua:e.ua})},addPagesGalleryItem:function(){if(Object.keys(this.gallery).length>4)return alert("Больше добавить нельзя");this.$refs.fileInputGallery.click()},addPagesGalleryItemPicked:function(e){var t=this;if(0!==Object.keys(e.target.files).length){var a=(+new Date-+new Date%100)/100;this.gallery[a]={id:a,img:"https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g"},setTimeout((function(){t.$refs.gallery.onFilePickedGallery(e)}),200)}},updateGallery:function(e){this.gallery[e.id]={id:e.id,img:e.img}},deleteGalleryItem:function(e){delete this.gallery[e.id]},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,a=e.target.files,i=new FileReader;if(this.file=a[0],this.filename=a[0].name,this.filename.indexOf(".")<=0)return alert("Please add a valid file");i.readAsDataURL(a[0]),this.uploadFilePagesImg({id:this.id,file:this.file,ua:this.ua}),this.getStatePagesEdit.img="",this.getStatePagesEdit.imgUa="",this.img="https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g",setTimeout((function(){var e=setInterval((function(){t.getDownloadPagesURL({id:t.id,ua:t.ua}),t.getStatePagesEdit.img&&clearInterval(e),t.ua&&t.getStatePagesEdit.imgUa&&clearInterval(e)}),250)}),1e3),setTimeout((function(){t.ua?t.img=t.getStatePagesEdit.imgUa:t.img=t.getStatePagesEdit.img}),2e3)},deleteMainImg:function(){this.img="https://via.placeholder.com/400",this.deleteFilePagesImg({id:this.id,ua:this.ua})},setActual:function(){this.actual?this.actualValue="ВКЛ":this.actualValue="ВЫКЛ"},setLanguage:function(){if(this.ua)this.getStatePages.database[this.id]={id:this.id,date:this.date,actual:this.actual,actualValue:this.actualValue,name:this.name,description:this.description,img:this.img,gallery:this.gallery,seo:this.seo,ua:this.uaItem},this.name=this.uaItem.name,this.description=this.uaItem.description,this.img=this.uaItem.img,this.gallery=this.uaItem.gallery,this.seo=this.uaItem.seo;else{var e=this.getStatePages.database[this.id];this.getStatePages.database[this.id].ua={id:this.id,date:this.date,actual:this.actual,actualValue:this.actualValue,name:this.name,description:this.description,img:this.img,gallery:this.gallery,seo:this.seo},this.name=e.name,this.description=e.description,this.img=e.img,this.gallery=e.gallery,this.seo=e.seo,this.uaItem=e.ua}}})};a("975a");const ae=Y()(te,[["render",D],["__scopeId","data-v-2b6a6222"]]);t["default"]=ae},"857a":function(e,t,a){var i=a("1d80"),l=a("577e"),n=/"/g;e.exports=function(e,t,a,s){var c=l(i(e)),u="<"+t;return""!==a&&(u+=" "+a+'="'+l(s).replace(n,"&quot;")+'"'),u+">"+c+"</"+t+">"}},"975a":function(e,t,a){"use strict";a("d260")},9911:function(e,t,a){"use strict";var i=a("23e7"),l=a("857a"),n=a("af03");i({target:"String",proto:!0,forced:n("link")},{link:function(e){return l(this,"a","href",e)}})},af03:function(e,t,a){var i=a("d039");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b866:function(e,t,a){"use strict";var i=a("7a23"),l={class:"my-btn border-button"};function n(e,t,a,n,s,c){return Object(i["z"])(),Object(i["g"])("button",l,[Object(i["G"])(e.$slots,"default",{},void 0,!0)])}var s={name:"MyButton"},c=(a("0dc3"),a("6b0d")),u=a.n(c);const r=u()(s,[["render",n],["__scopeId","data-v-27e5dabb"]]);t["a"]=r},d260:function(e,t,a){},e991:function(e,t,a){"use strict";a("f42f")},f42f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-e20d7d72.3feaa636.js.map