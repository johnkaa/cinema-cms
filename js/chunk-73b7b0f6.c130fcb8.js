(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73b7b0f6"],{"0dc3":function(e,t,i){"use strict";i("505e")},"4bc9":function(e,t,i){},"505e":function(e,t,i){},"5f1e":function(e,t,i){},"6b23":function(e,t,i){"use strict";var a=i("7a23"),l={class:"close-btn"};function s(e,t,i,s,n,c){return Object(a["z"])(),Object(a["g"])("button",l,"x")}var n={name:"MyCloseButton"},c=(i("e991"),i("6b0d")),h=i.n(c);const r=h()(n,[["render",s],["__scopeId","data-v-7b00fafe"]]);t["a"]=r},a681:function(e,t,i){"use strict";i.r(t);i("b0c0"),i("a4d3"),i("e01a");var a=i("7a23"),l=function(e){return Object(a["C"])("data-v-8ac6d1a8"),e=e(),Object(a["A"])(),e},s={class:"cinemas-edit-halls"},n={class:"switch__wrapper"},c={class:"switch"},h={class:"switch__label"},r=l((function(){return Object(a["h"])("span",{class:"lever"},null,-1)})),d={class:"cinemas-edit-halls__name"},o=l((function(){return Object(a["h"])("span",null,"Номер зала",-1)})),m={class:"cinemas-edit-halls__description"},u=l((function(){return Object(a["h"])("span",null,"Описание",-1)})),g={class:"cinemas-edit__scheme"},p=l((function(){return Object(a["h"])("span",null,"Схема зала",-1)})),f=["src"],b=Object(a["j"])("Удалить"),y={class:"cinemas-edit-halls__main-img"},O=l((function(){return Object(a["h"])("span",null,"Верхний баннер",-1)})),j=["src"],I=Object(a["j"])("Удалить"),v=l((function(){return Object(a["h"])("p",null,"Галерея картинок:",-1)})),k={class:"cinemas-edit-halls__gallery"},H=l((function(){return Object(a["h"])("span",null,"Размер: 1000х1900",-1)})),C=Object(a["j"])("+"),S={class:"cinemas-edit-halls__seo"},_=l((function(){return Object(a["h"])("span",null,"SEO блок:",-1)})),w={class:"cinemas-edit-halls__seo-item"},F=l((function(){return Object(a["h"])("span",null,"URL:",-1)})),x={class:"cinemas-edit-halls__seo-item"},G=l((function(){return Object(a["h"])("span",null,"Title:",-1)})),P={class:"cinemas-edit-halls__seo-item"},R=l((function(){return Object(a["h"])("span",null,"Keywords:",-1)})),U={class:"cinemas-edit-halls__seo-item"},E=l((function(){return Object(a["h"])("span",null,"Description:",-1)})),D=Object(a["j"])("Сохранить");function z(e,t,i,l,z,L){var T=this,$=Object(a["H"])("my-button"),B=Object(a["H"])("cinemas-halls-gallery");return Object(a["z"])(),Object(a["g"])("div",s,[Object(a["h"])("div",n,[Object(a["h"])("div",c,[Object(a["h"])("label",h,[Object(a["R"])(Object(a["h"])("input",{class:"switch__checkbox",type:"checkbox",onChange:t[0]||(t[0]=function(){return L.setLanguage&&L.setLanguage.apply(L,arguments)}),"onUpdate:modelValue":t[1]||(t[1]=function(e){return z.ua=e})},null,544),[[a["L"],z.ua]]),r])])]),Object(a["h"])("div",d,[o,Object(a["R"])(Object(a["h"])("input",{type:"text",placeholder:"Номер зала","onUpdate:modelValue":t[2]||(t[2]=function(e){return z.name=e})},null,512),[[a["O"],z.name]])]),Object(a["h"])("div",m,[u,Object(a["R"])(Object(a["h"])("textarea",{placeholder:"Описание","onUpdate:modelValue":t[3]||(t[3]=function(e){return z.description=e})},null,512),[[a["O"],z.description]])]),Object(a["h"])("div",g,[p,Object(a["h"])("img",{src:z.scheme,alt:"",onClick:t[4]||(t[4]=function(){return L.onPickFileScheme&&L.onPickFileScheme.apply(L,arguments)})},null,8,f),Object(a["h"])("input",{id:"inputFileScheme",type:"file",style:{display:"none"},ref:"fileInput1",accept:"image/*",onChange:t[5]||(t[5]=function(){return L.onFilePickedScheme&&L.onFilePickedScheme.apply(L,arguments)})},null,544),Object(a["k"])($,{onClick:L.deleteScheme},{default:Object(a["Q"])((function(){return[b]})),_:1},8,["onClick"])]),Object(a["h"])("div",y,[O,Object(a["h"])("img",{src:z.img,alt:"",onClick:t[6]||(t[6]=function(){return L.onPickFile&&L.onPickFile.apply(L,arguments)})},null,8,j),Object(a["h"])("input",{id:"inputFile",type:"file",style:{display:"none"},ref:"fileInput",accept:"image/*",onChange:t[7]||(t[7]=function(){return L.onFilePicked&&L.onFilePicked.apply(L,arguments)})},null,544),Object(a["k"])($,{onClick:L.deleteMainImg},{default:Object(a["Q"])((function(){return[I]})),_:1},8,["onClick"])]),v,Object(a["h"])("div",k,[H,(Object(a["z"])(!0),Object(a["g"])(a["a"],null,Object(a["F"])(this.gallery,(function(e,t){return Object(a["z"])(),Object(a["e"])(B,{key:t,gallery:e,path:T.path,id:T.id,items:T.gallery,ref:"gallery",onCreate:L.updateGallery,onDelete:L.deleteGalleryItem},null,8,["gallery","path","id","items","onCreate","onDelete"])})),128)),Object(a["k"])($,{class:"add text-success",onClick:L.addHallsGalleryItem},{default:Object(a["Q"])((function(){return[C]})),_:1},8,["onClick"]),Object(a["h"])("input",{class:"add-gallery-item",type:"file",style:{display:"none"},ref:"fileInputGallery",accept:"image/*",onChange:t[8]||(t[8]=function(){return L.addCinemasHallsGalleryItemPicked&&L.addCinemasHallsGalleryItemPicked.apply(L,arguments)})},null,544)]),Object(a["h"])("div",S,[_,Object(a["h"])("form",null,[Object(a["h"])("div",w,[F,Object(a["R"])(Object(a["h"])("input",{type:"text",placeholder:"URL","onUpdate:modelValue":t[9]||(t[9]=function(e){return z.seo.url=e})},null,512),[[a["O"],z.seo.url]])]),Object(a["h"])("div",x,[G,Object(a["R"])(Object(a["h"])("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[10]||(t[10]=function(e){return z.seo.title=e})},null,512),[[a["O"],z.seo.title]])]),Object(a["h"])("div",P,[R,Object(a["R"])(Object(a["h"])("input",{type:"text",placeholder:"Keywords","onUpdate:modelValue":t[11]||(t[11]=function(e){return z.seo.keywords=e})},null,512),[[a["O"],z.seo.keywords]])]),Object(a["h"])("div",U,[E,Object(a["R"])(Object(a["h"])("textarea",{placeholder:"Description","onUpdate:modelValue":t[12]||(t[12]=function(e){return z.seo.description=e})},null,512),[[a["O"],z.seo.description]])])])]),Object(a["k"])($,{class:"cinemas-edit-halls__btn",onClick:L.submit},{default:Object(a["Q"])((function(){return[D]})),_:1},8,["onClick"])])}var L=i("5530"),T=(i("b64b"),i("b866")),$={class:"cinemas-edit-halls__gallery-item"},B=["src"];function M(e,t,i,l,s,n){var c=Object(a["H"])("my-close-button");return Object(a["z"])(),Object(a["g"])("div",$,[Object(a["k"])(c,{onClick:n.deleteGalleryItem},null,8,["onClick"]),Object(a["h"])("img",{class:Object(a["r"])(i.gallery.id),src:s.img,alt:"",onClick:t[0]||(t[0]=function(){return n.onPickFileGallery&&n.onPickFileGallery.apply(n,arguments)})},null,10,B),Object(a["h"])("input",{type:"file",style:{display:"none"},ref:"fileInputGallery",accept:"image/*",onChange:t[1]||(t[1]=function(){return n.onFilePickedGallery&&n.onFilePickedGallery.apply(n,arguments)})},null,544)])}var V=i("1da1"),q=(i("96cf"),i("99af"),i("6b23")),A=i("5502"),Q=i("588e"),X=i("7ac4"),J={name:"CinemasEditGallery",components:{MyCloseButton:q["a"]},props:["gallery","path","id","items"],data:function(){return{img:this.gallery.img}},methods:Object(L["a"])(Object(L["a"])({},Object(A["d"])(["updateCinemasGalleryItem","deleteCinemasGalleryItem"])),{},{uploadFile:function(){var e="cinemas/".concat(this.path,"/halls/").concat(this.id,"/gallery/").concat(this.gallery.id),t=Object(Q["d"])(X["a"],e);Object(Q["e"])(t,this.file)},getFileUrl:function(){var e=this,t="cinemas/".concat(this.path,"/halls/").concat(this.id,"/gallery/").concat(this.gallery.id),i=setInterval(Object(V["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(Q["b"])(Object(Q["d"])(X["a"],t)).then((function(t){t&&(e.img=t)}));case 2:e.img&&clearInterval(i);case 3:case"end":return a.stop()}}),a)}))),250)},onPickFileGallery:function(){this.$refs.fileInputGallery.click()},onFilePickedGallery:function(e){var t=this,i=e.target.files,a=new FileReader;if(this.file=i[0],this.filename=i[0].name,this.filename.indexOf(".")<=0)return alert("Please add a valid file");a.readAsDataURL(i[0]),this.img="https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g",this.uploadFile(),setTimeout((function(){t.getFileUrl()}),1e3),setTimeout((function(){t.$emit("create",{id:t.gallery.id,img:t.img})}),2e3)},deleteGalleryItem:function(){if(1===Object.keys(this.items).length)return alert("Должна быть хотя бы 1 картинка");this.$emit("delete",{id:this.gallery.id});var e="cinemas/".concat(this.path,"/halls/").concat(this.id,"/gallery/").concat(this.gallery.id),t=Object(Q["d"])(X["a"],e);Object(Q["a"])(t)}})},K=(i("eb21"),i("6b0d")),Y=i.n(K);const N=Y()(J,[["render",M],["__scopeId","data-v-d7792bb8"]]);var W=N,Z=new Date,ee=Z.getDate()+"."+(Z.getMonth()+1)+"."+Z.getFullYear(),te={name:"CinemasEditHalls",components:{CinemasHallsGallery:W,MyButton:T["a"]},mounted:function(){var e=this;this.gallery[(+new Date-+new Date%100)/100]={id:(+new Date-+new Date%100)/100,img:"https://via.placeholder.com/200"},setTimeout((function(){if(e.getStateCinemasHalls.halls[e.id]){var t=e.getStateCinemasHalls.halls[e.id];e.date=t.date,e.name=t.name,e.description=t.description,e.scheme=t.scheme,e.img=t.img,e.gallery=t.gallery,e.seo=t.seo,e.uaItem=t.ua}else e.date=ee,e.name="Зал",e.description="",e.scheme="https://via.placeholder.com/200",e.img="https://via.placeholder.com/400",e.gallery={999:{id:999,img:"https://via.placeholder.com/200"}},e.seo={url:"",title:"",keywords:"",description:""},e.uaItem={id:e.id,date:ee,name:"Зал",description:"",scheme:"https://via.placeholder.com/200",img:"https://via.placeholder.com/400",gallery:{9999:{id:9999,img:"https://via.placeholder.com/200"}},seo:{url:"",title:"",keywords:"",description:""}}}),500)},computed:Object(A["c"])(["getStateHallsEdit","getStateCinemasHalls"]),props:["id","path"],data:function(){return{name:"Зал",description:"",scheme:"https://via.placeholder.com/200",img:"https://via.placeholder.com/400",gallery:{999:{id:999,img:"https://via.placeholder.com/200"}},seo:{url:"",title:"",keywords:"",description:""},date:"",hall:null,file:null,schemeFile:null,ua:!1,uaItem:{}}},methods:Object(L["a"])(Object(L["a"])({},Object(A["d"])(["uploadFileImgHall","getDownloadHallURL","uploadSchemeImg","getDownloadHallSchemeURL","deleteFileImgHall","deleteSchemeImg","updateCinemasHalls"])),{},{submit:function(){this.ua?(this.getStateCinemasHalls.halls[this.id].ua={id:this.id,date:this.date,name:this.name,description:this.description,scheme:this.scheme,img:this.img,gallery:this.gallery,seo:this.seo},this.uaItem=this.getStateCinemasHalls.halls[this.id].ua):this.getStateCinemasHalls.halls[this.id]={id:this.id,date:this.date,name:this.name,description:this.description,scheme:this.scheme,img:this.img,gallery:this.gallery,seo:this.seo,ua:this.uaItem};var e=this.getStateCinemasHalls.halls[this.id];this.hall={id:this.id,date:this.date,name:e.name,description:e.description,scheme:e.scheme,img:e.img,gallery:e.gallery,seo:e.seo,ua:e.ua},this.updateCinemasHalls(this.hall),this.$router.push({path:"/admin/cinemas-edit/".concat(this.path)})},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,i=e.target.files,a=new FileReader;if(this.file=i[0],this.filename=i[0].name,this.filename.indexOf(".")<=0)return alert("Please add a valid file");a.readAsDataURL(i[0]),this.uploadFileImgHall({path:this.path,id:this.id,file:this.file,ua:this.ua}),this.getStateHallsEdit.hallImg="",this.getStateHallsEdit.hallImgUa="",this.img="https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g",setTimeout((function(){var e=setInterval((function(){t.getDownloadHallURL({path:t.path,id:t.id,file:t.file,ua:t.ua}),t.getStateHallsEdit.hallImg&&clearInterval(e),t.ua&&t.getStateHallsEdit.hallImgUa&&clearInterval(e)}),250)}),1e3),setTimeout((function(){t.ua?t.img=t.getStateHallsEdit.hallImgUa:t.img=t.getStateHallsEdit.hallImg}),2e3)},onPickFileScheme:function(){this.$refs.fileInput1.click()},onFilePickedScheme:function(e){var t=this,i=e.target.files,a=new FileReader;if(this.schemeFile=i[0],this.filename=i[0].name,this.filename.indexOf(".")<=0)return alert("Please add a valid file");a.readAsDataURL(i[0]),this.uploadSchemeImg({path:this.path,id:this.id,file:this.schemeFile,ua:this.ua}),this.getStateHallsEdit.schemeImg="",this.getStateHallsEdit.schemeImgUa="",this.scheme="https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g";var l=setInterval((function(){t.getDownloadHallSchemeURL({path:t.path,id:t.id,file:t.file,ua:t.ua}),t.getStateHallsEdit.schemeImg&&clearInterval(l),t.ua&&t.getStateHallsEdit.schemeImgUa&&clearInterval(l)}),250);setTimeout((function(){t.ua?t.scheme=t.getStateHallsEdit.schemeImgUa:t.scheme=t.getStateHallsEdit.schemeImg}),1500)},deleteScheme:function(){this.scheme="https://via.placeholder.com/200",this.deleteSchemeImg({path:this.path,id:this.id})},deleteMainImg:function(){this.img="https://via.placeholder.com/400",this.deleteFileImgHall({path:this.path,id:this.id})},addHallsGalleryItem:function(){if(Object.keys(this.gallery).length>4)return alert("Больше добавить нельзя");this.$refs.fileInputGallery.click()},addCinemasHallsGalleryItemPicked:function(e){var t=this;if(0!==Object.keys(e.target.files).length){var i=(+new Date-+new Date%100)/100;this.gallery[i]={id:i,img:"https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g"},setTimeout((function(){t.$refs.gallery.onFilePickedGallery(e)}),200)}},updateGallery:function(e){this.ua?this.getStateCinemasHalls.halls[this.id].ua.gallery[e.id]={id:e.id,img:e.img}:this.getStateCinemasHalls.halls[this.id].gallery[e.id]={id:e.id,img:e.img},this.gallery[e.id]={id:e.id,img:e.img}},deleteGalleryItem:function(e){delete this.gallery[e.id]},setLanguage:function(){if(this.ua){this.getStateCinemasHalls.halls[this.id]={id:this.id,date:this.date,name:this.name,description:this.description,img:this.img,gallery:this.gallery,scheme:this.scheme,seo:this.seo,ua:this.uaItem};var e=this.getStateCinemasHalls.halls[this.id].ua;e?(this.name=e.name,this.description=e.description,this.scheme=e.scheme,this.img=e.img,this.gallery=e.gallery,this.seo=e.seo):(this.name=this.uaItem.name,this.description=this.uaItem.description,this.scheme=this.uaItem.scheme,this.img=this.uaItem.img,this.gallery=this.uaItem.gallery,this.seo=this.uaItem.seo)}else{this.getStateCinemasHalls.halls[this.id].ua={id:this.id,date:this.date,name:this.name,description:this.description,img:this.img,gallery:this.gallery,scheme:this.scheme,seo:this.seo};var t=this.getStateCinemasHalls.halls[this.id];t&&(this.name=t.name,this.description=t.description,this.scheme=t.scheme,this.img=t.img,this.gallery=t.gallery,this.seo=t.seo,this.uaItem=t.ua)}}})};i("bc00");const ie=Y()(te,[["render",z],["__scopeId","data-v-8ac6d1a8"]]);t["default"]=ie},b866:function(e,t,i){"use strict";var a=i("7a23"),l={class:"my-btn border-button"};function s(e,t,i,s,n,c){return Object(a["z"])(),Object(a["g"])("button",l,[Object(a["G"])(e.$slots,"default",{},void 0,!0)])}var n={name:"MyButton"},c=(i("0dc3"),i("6b0d")),h=i.n(c);const r=h()(n,[["render",s],["__scopeId","data-v-27e5dabb"]]);t["a"]=r},bc00:function(e,t,i){"use strict";i("5f1e")},e991:function(e,t,i){"use strict";i("f42f")},eb21:function(e,t,i){"use strict";i("4bc9")},f42f:function(e,t,i){}}]);
//# sourceMappingURL=chunk-73b7b0f6.c130fcb8.js.map