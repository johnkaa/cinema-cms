(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4126bc75"],{"003d":function(t,e,i){"use strict";i("43e5")},"0644":function(t,e,i){},"0dc3":function(t,e,i){"use strict";i("5771")},3309:function(t,e,i){"use strict";i.r(e);i("a4d3"),i("e01a"),i("9911");var l=i("7a23"),s=function(t){return Object(l["C"])("data-v-338bf8e1"),t=t(),Object(l["A"])(),t},a={class:"films-editor"},n={class:"switch__wrapper"},o={class:"switch"},c={class:"switch__label"},r=s((function(){return Object(l["h"])("span",{class:"lever"},null,-1)})),h={class:"films-editor__name"},d=s((function(){return Object(l["h"])("span",null,"Название фильма",-1)})),u={class:"films-editor__description"},p=s((function(){return Object(l["h"])("span",null,"Описание",-1)})),m={class:"films-editor__main-img"},g=s((function(){return Object(l["h"])("span",null,"Главная картинка",-1)})),f=["src"],y=Object(l["j"])("Удалить"),b={class:"films-editor__gallery"},O=s((function(){return Object(l["h"])("span",null,"Размер: 1000х1900",-1)})),j=Object(l["j"])("+"),k={class:"films-editor__link"},v=s((function(){return Object(l["h"])("span",null,"Ссылка на трейлер",-1)})),I={class:"films-editor__type"},F=s((function(){return Object(l["h"])("span",null,"Тип кино",-1)})),_={class:"films-editor__type-item"},S=s((function(){return Object(l["h"])("label",{for:"3d"},"3D",-1)})),w={class:"films-editor__type-item"},x=s((function(){return Object(l["h"])("label",{for:"2d"},"2D",-1)})),P={class:"films-editor__type-item"},D=s((function(){return Object(l["h"])("label",{for:"IMAX"},"IMAX",-1)})),U={class:"films-editor__seo"},C=s((function(){return Object(l["h"])("span",null,"SEO блок:",-1)})),G={class:"films-editor__seo-item"},R=s((function(){return Object(l["h"])("span",null,"URL:",-1)})),A={class:"films-editor__seo-item"},M=s((function(){return Object(l["h"])("span",null,"Title:",-1)})),E={class:"films-editor__seo-item"},L=s((function(){return Object(l["h"])("span",null,"Keywords:",-1)})),V={class:"films-editor__seo-item"},N=s((function(){return Object(l["h"])("span",null,"Description:",-1)})),X={class:"films-editor__btns"},z=Object(l["j"])("Сохранить"),B=Object(l["j"])("Вернуть базовую версию"),$={key:0,class:"info text-success"};function T(t,e,i,s,T,H){var Q=this,q=Object(l["H"])("my-button"),J=Object(l["H"])("films-editor-gallery");return Object(l["z"])(),Object(l["g"])("div",a,[Object(l["h"])("div",n,[Object(l["h"])("div",o,[Object(l["h"])("label",c,[Object(l["R"])(Object(l["h"])("input",{class:"switch__checkbox",type:"checkbox",onChange:e[0]||(e[0]=function(){return H.setLanguage&&H.setLanguage.apply(H,arguments)}),"onUpdate:modelValue":e[1]||(e[1]=function(t){return T.ua=t})},null,544),[[l["L"],T.ua]]),r])])]),Object(l["h"])("div",h,[d,Object(l["R"])(Object(l["h"])("input",{type:"text",placeholder:"Название фильма","onUpdate:modelValue":e[2]||(e[2]=function(t){return T.title=t})},null,512),[[l["O"],T.title]])]),Object(l["h"])("div",u,[p,Object(l["R"])(Object(l["h"])("textarea",{placeholder:"Описание","onUpdate:modelValue":e[3]||(e[3]=function(t){return T.description=t})},null,512),[[l["O"],T.description]])]),Object(l["h"])("div",m,[g,Object(l["h"])("img",{src:T.img,alt:"",onClick:e[4]||(e[4]=function(){return H.onPickFile&&H.onPickFile.apply(H,arguments)})},null,8,f),Object(l["h"])("input",{id:"inputFile",type:"file",style:{display:"none"},ref:"fileInput",accept:"image/*",onChange:e[5]||(e[5]=function(){return H.onFilePicked&&H.onFilePicked.apply(H,arguments)})},null,544),Object(l["k"])(q,{onClick:H.deleteMainImg},{default:Object(l["Q"])((function(){return[y]})),_:1},8,["onClick"])]),Object(l["h"])("div",b,[O,(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["F"])(this.gallery,(function(t){return Object(l["z"])(),Object(l["e"])(J,{key:t.id,gallery:t,path:Q.path,pathID:Q.id,items:Q.gallery,onCreate:H.updateGallery,onDelete:H.deleteGalleryItem},null,8,["gallery","path","pathID","items","onCreate","onDelete"])})),128)),Object(l["k"])(q,{class:"add text-success",onClick:H.addFilmGalleryItem},{default:Object(l["Q"])((function(){return[j]})),_:1},8,["onClick"])]),Object(l["h"])("div",k,[v,Object(l["R"])(Object(l["h"])("input",{type:"text",placeholder:"Ссылка на видео в youtube","onUpdate:modelValue":e[6]||(e[6]=function(t){return T.link=t})},null,512),[[l["O"],T.link]])]),Object(l["h"])("div",I,[F,Object(l["h"])("div",_,[Object(l["R"])(Object(l["h"])("input",{type:"checkbox",id:"3d",name:"3d","onUpdate:modelValue":e[7]||(e[7]=function(t){return T.type.type3D=t})},null,512),[[l["L"],T.type.type3D]]),S]),Object(l["h"])("div",w,[Object(l["R"])(Object(l["h"])("input",{type:"checkbox",id:"2d",name:"2d","onUpdate:modelValue":e[8]||(e[8]=function(t){return T.type.type2D=t})},null,512),[[l["L"],T.type.type2D]]),x]),Object(l["h"])("div",P,[Object(l["R"])(Object(l["h"])("input",{type:"checkbox",id:"IMAX",name:"IMAX","onUpdate:modelValue":e[9]||(e[9]=function(t){return T.type.typeIMAX=t})},null,512),[[l["L"],T.type.typeIMAX]]),D])]),Object(l["h"])("div",U,[C,Object(l["h"])("form",null,[Object(l["h"])("div",G,[R,Object(l["R"])(Object(l["h"])("input",{type:"text",placeholder:"URL","onUpdate:modelValue":e[10]||(e[10]=function(t){return T.seo.url=t})},null,512),[[l["O"],T.seo.url]])]),Object(l["h"])("div",A,[M,Object(l["R"])(Object(l["h"])("input",{type:"text",placeholder:"Title","onUpdate:modelValue":e[11]||(e[11]=function(t){return T.seo.title=t})},null,512),[[l["O"],T.seo.title]])]),Object(l["h"])("div",E,[L,Object(l["R"])(Object(l["h"])("input",{type:"text",placeholder:"Keywords","onUpdate:modelValue":e[12]||(e[12]=function(t){return T.seo.keywords=t})},null,512),[[l["O"],T.seo.keywords]])]),Object(l["h"])("div",V,[N,Object(l["R"])(Object(l["h"])("textarea",{placeholder:"Description","onUpdate:modelValue":e[13]||(e[13]=function(t){return T.seo.description=t})},null,512),[[l["O"],T.seo.description]])])])]),Object(l["h"])("div",X,[Object(l["k"])(q,{class:"films-editor__btns-btn",onClick:H.submit},{default:Object(l["Q"])((function(){return[z]})),_:1},8,["onClick"]),Object(l["k"])(q,{class:"films-editor__btns-btn",onClick:H.returnBaseVersion},{default:Object(l["Q"])((function(){return[B]})),_:1},8,["onClick"])]),this.uploaded?(Object(l["z"])(),Object(l["g"])("p",$,"Изменения сохранены")):Object(l["f"])("",!0)])}var H=i("5530"),Q=(i("fb6a"),i("99af"),i("b0c0"),i("b64b"),i("b866")),q={class:"films-editor__gallery-item"},J=["src"];function K(t,e,i,s,a,n){var o=Object(l["H"])("my-close-button");return Object(l["z"])(),Object(l["g"])("div",q,[Object(l["k"])(o,{onClick:n.deleteGalleryItem},null,8,["onClick"]),Object(l["h"])("img",{class:Object(l["r"])(i.gallery.id),src:a.img,alt:"",onClick:e[0]||(e[0]=function(){return n.onPickFileGallery&&n.onPickFileGallery.apply(n,arguments)})},null,10,J),Object(l["h"])("input",{type:"file",style:{display:"none"},ref:"fileInputGallery",accept:"image/*",onChange:e[1]||(e[1]=function(){return n.onFilePickedGallery&&n.onFilePickedGallery.apply(n,arguments)})},null,544)])}var W=i("6b23"),Y=i("5502"),Z=i("588e"),tt=i("7ac4"),et={name:"FilmsEditorGallery",components:{MyCloseButton:W["a"]},props:["gallery","path","pathID","items"],data:function(){return{img:this.gallery.img}},methods:Object(H["a"])(Object(H["a"])({},Object(Y["d"])(["updateGalleryItem","deleteFilmGalleryItem"])),{},{uploadFile:function(){var t="films/films".concat(this.path[0].toUpperCase()+this.path.slice(1)+"/"+this.pathID,"/gallery/").concat(this.gallery.id),e=Object(Z["d"])(tt["a"],t);Object(Z["e"])(e,this.file)},getFileUrl:function(){var t=this,e="films/films".concat(this.path[0].toUpperCase()+this.path.slice(1)+"/"+this.pathID,"/gallery/").concat(this.gallery.id),i=setInterval((function(){Object(Z["b"])(Object(Z["d"])(tt["a"],e)).then((function(e){t.img=e})),t.img&&clearInterval(i)}),1e3)},onPickFileGallery:function(){this.$refs.fileInputGallery.click()},onFilePickedGallery:function(t){var e=this,i=t.target.files,l=new FileReader;if(this.file=i[0],this.filename=i[0].name,this.filename.indexOf(".")<=0)return alert("Please add a valid file");l.addEventListener("load",(function(){e.img=l.result})),l.readAsDataURL(i[0]),this.uploadFile(),this.addItem(),setTimeout((function(){e.$emit("create",{id:e.gallery.id,img:e.img})}),1500)},addItem:function(){var t=this;setTimeout((function(){t.getFileUrl()}),200)},deleteGalleryItem:function(){if(1===Object.keys(this.items).length)return alert("Должна быть хотя бы 1 картинка");this.$emit("delete",{id:this.gallery.id});var t="films/films".concat(this.path[0].toUpperCase()+this.path.slice(1)+"/"+this.pathID,"/gallery/").concat(this.gallery.id),e=Object(Z["d"])(tt["a"],t);Object(Z["a"])(e)}})},it=(i("bca4"),i("d959")),lt=i.n(it);const st=lt()(et,[["render",K],["__scopeId","data-v-06821b3f"]]);var at=st,nt=i("66ce"),ot=i("ab55"),ct={name:"FilmsEditor",components:{FilmsEditorGallery:at,MyButton:Q["a"]},computed:Object(Y["c"])(["getStateFilmsEditor","getStateFilmsNow","getStateFilmsSoon"]),mounted:function(){var t=this;if(this.fullPath=this.path[0].toUpperCase()+this.path.slice(1),"Soon"===this.fullPath){this.soon=!0;var e=this.getStateFilmsSoon.database[this.id];if(!e){var i=Object(nt["c"])(ot["a"],"films/filmsSoon/".concat(this.id));return Object(nt["b"])(i,(function(e){var i=e.val();t.title=i.title,t.description=i.description,t.img=i.img,t.gallery=i.gallery,t.link=i.link,t.type=i.type,t.seo=i.seo,t.uaItem=i.ua}))}this.title=e.title,this.description=e.description,this.img=e.img,this.gallery=e.gallery,this.link=e.link,this.type=e.type,this.seo=e.seo,this.uaItem=e.ua}else{var l=this.getStateFilmsNow.database[this.id];if(!l){var s=Object(nt["c"])(ot["a"],"films/filmsNow/".concat(this.id));return Object(nt["b"])(s,(function(e){var i=e.val();t.title=i.title,t.description=i.description,t.img=i.img,t.gallery=i.gallery,t.link=i.link,t.type=i.type,t.seo=i.seo,t.uaItem=i.ua}))}this.title=l.title,this.description=l.description,this.img=l.img,this.gallery=l.gallery,this.link=l.link,this.type=l.type,this.seo=l.seo,this.uaItem=l.ua}},props:["path","id"],data:function(){return{title:"",description:"",img:"",gallery:{},link:"",type:{},seo:{},uploaded:!1,ua:!1,uaItem:{},soon:!1,fullPath:""}},methods:Object(H["a"])(Object(H["a"])({},Object(Y["d"])(["uploadFileFilmImg","getFileFilmUrl","deleteFileFilmImg"])),{},{submit:function(){if(this.ua)if("Soon"===this.fullPath){this.getStateFilmsSoon.database[this.id].ua={id:this.id,soon:this.soon,title:this.title,description:this.description,img:this.img,gallery:this.gallery,link:this.link,type:this.type,seo:this.seo};var t=this.getStateFilmsSoon.database[this.id];Object(nt["d"])(Object(nt["c"])(ot["a"],"films/films".concat(this.fullPath,"/").concat(this.id)),{id:this.id,soon:this.soon,title:t.title,description:t.description,img:t.img,gallery:t.gallery,link:t.link,type:t.type,seo:t.seo,ua:t.ua})}else{this.getStateFilmsNow.database[this.id].ua={id:this.id,soon:this.soon,title:this.title,description:this.description,img:this.img,gallery:this.gallery,link:this.link,type:this.type,seo:this.seo};var e=this.getStateFilmsNow.database[this.id];Object(nt["d"])(Object(nt["c"])(ot["a"],"films/films".concat(this.fullPath,"/").concat(this.id)),{id:this.id,soon:this.soon,title:e.title,description:e.description,img:e.img,gallery:e.gallery,link:e.link,type:e.type,seo:e.seo,ua:e.ua})}else Object(nt["d"])(Object(nt["c"])(ot["a"],"films/films".concat(this.fullPath,"/").concat(this.id)),{id:this.id,soon:this.soon,title:this.title,description:this.description,img:this.img,gallery:this.gallery,link:this.link,type:this.type,seo:this.seo,ua:this.uaItem});this.$router.push({path:"/admin/films"})},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(t){var e=this,i=t.target.files,l=new FileReader;if(this.file=i[0],this.filename=i[0].name,this.filename.indexOf(".")<=0)return alert("Please add a valid file");l.readAsDataURL(i[0]),this.uploadFileFilmImg({path:this.fullPath,id:this.id,file:this.file,ua:this.ua}),this.getStateFilmsEditor.img="",this.getStateFilmsEditor.imgUa="",this.img="https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif?cid=ecf05e47on66p48qsf04xv9no0it5htgx7uzbpa4wx0kd1zg&rid=giphy.gif&ct=g";var s=setInterval((function(){e.getFileFilmUrl({path:e.fullPath,id:e.id,ua:e.ua}),e.getStateFilmsEditor.img&&clearInterval(s),e.ua&&e.getStateFilmsEditor.imgUa&&clearInterval(s)}),250);setTimeout((function(){e.img=e.getStateFilmsEditor.img,e.ua&&(e.img=e.getStateFilmsEditor.imgUa)}),1500)},addFilmGalleryItem:function(){var t=(+new Date-+new Date%100)/100;if(Object.keys(this.gallery).length>4)return alert("Больше добавить нельзя");this.gallery[t]={id:t,img:"https://via.placeholder.com/200"}},updateGallery:function(t){this.ua?this.soon?this.getStateFilmsSoon.database[this.id].ua.gallery[t.id]={id:t.id,img:t.img}:this.getStateFilmsNow.database[this.id].ua.gallery[t.id]={id:t.id,img:t.img}:this.soon?this.getStateFilmsSoon.database[this.id].gallery[t.id]={id:t.id,img:t.img}:this.getStateFilmsNow.database[this.id].gallery[t.id]={id:t.id,img:t.img},this.gallery[t.id]={id:t.id,img:t.img}},deleteGalleryItem:function(t){delete this.gallery[t.id]},deleteMainImg:function(){Object(nt["d"])(Object(nt["c"])(ot["a"],"films/films".concat(this.fullPath,"/").concat(this.id)),{id:this.id,title:this.title,description:this.description,img:"https://via.placeholder.com/400x400",gallery:this.gallery,link:this.link,type:this.type,seo:this.seo}),this.deleteFileFilmImg({path:this.fullPath,id:this.id})},returnBaseVersion:function(){this.title="Приключения животных",this.description="",this.img="https://via.placeholder.com/400x400",this.gallery={0:{id:0,img:"https://via.placeholder.com/250x250"}},this.link="",this.type={type3D:!1,type2D:!1,typeIMAX:!1},this.seo={url:"",title:"",description:"",keywords:""},this.soon?this.getStateFilmsSoon.database[this.id].ua={id:this.id,title:"Пригоди тварин",description:"",img:"https://via.placeholder.com/400x400",gallery:{0:{id:0,img:"https://via.placeholder.com/250x250"}},link:"",type:{type3D:!1,type2D:!1,typeIMAX:!1},seo:{url:"",title:"",description:"",keywords:""}}:this.getStateFilmsNow.database[this.id].ua={id:this.id,title:"Пригоди тварин",description:"",img:"https://via.placeholder.com/400x400",gallery:{0:{id:0,img:"https://via.placeholder.com/250x250"}},link:"",type:{type3D:!1,type2D:!1,typeIMAX:!1},seo:{url:"",title:"",description:"",keywords:""}},this.deleteFileFilmImg({path:this.fullPath,id:this.id,ua:this.ua})},setLanguage:function(){if("Now"===this.fullPath)if(this.ua)this.getStateFilmsNow.database[this.id]={title:this.title,description:this.description,img:this.img,gallery:this.gallery,link:this.link,type:this.type,seo:this.seo,ua:this.uaItem},this.title=this.uaItem.title,this.description=this.uaItem.description,this.img=this.uaItem.img,this.gallery=this.uaItem.gallery,this.link=this.uaItem.link,this.type=this.uaItem.type,this.seo=this.uaItem.seo;else{var t=this.getStateFilmsNow.database[this.id];this.getStateFilmsNow.database[this.id].ua={id:this.id,title:this.title,description:this.description,img:this.img,gallery:this.gallery,link:this.link,type:this.type,seo:this.seo},this.title=t.title,this.description=t.description,this.img=t.img,this.gallery=t.gallery,this.link=t.link,this.type=t.type,this.seo=t.seo,this.uaItem=t.ua}else if(this.ua)this.getStateFilmsSoon.database[this.id]={title:this.title,description:this.description,img:this.img,gallery:this.gallery,link:this.link,type:this.type,seo:this.seo,ua:this.uaItem},this.title=this.uaItem.title,this.description=this.uaItem.description,this.img=this.uaItem.img,this.gallery=this.uaItem.gallery,this.link=this.uaItem.link,this.type=this.uaItem.type,this.seo=this.uaItem.seo;else{var e=this.getStateFilmsSoon.database[this.id];this.getStateFilmsSoon.database[this.id].ua={id:this.id,title:this.title,description:this.description,img:this.img,gallery:this.gallery,link:this.link,type:this.type,seo:this.seo},this.title=e.title,this.description=e.description,this.img=e.img,this.gallery=e.gallery,this.link=e.link,this.type=e.type,this.seo=e.seo,this.uaItem=e.ua}}})};i("003d");const rt=lt()(ct,[["render",T],["__scopeId","data-v-338bf8e1"]]);e["default"]=rt},"43e5":function(t,e,i){},5771:function(t,e,i){},"6b23":function(t,e,i){"use strict";var l=i("7a23"),s={class:"close-btn"};function a(t,e,i,a,n,o){return Object(l["z"])(),Object(l["g"])("button",s,"x")}var n={name:"MyCloseButton"},o=(i("e991"),i("d959")),c=i.n(o);const r=c()(n,[["render",a],["__scopeId","data-v-7b00fafe"]]);e["a"]=r},"857a":function(t,e,i){var l=i("1d80"),s=i("577e"),a=/"/g;t.exports=function(t,e,i,n){var o=s(l(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+s(n).replace(a,"&quot;")+'"'),c+">"+o+"</"+e+">"}},9911:function(t,e,i){"use strict";var l=i("23e7"),s=i("857a"),a=i("af03");l({target:"String",proto:!0,forced:a("link")},{link:function(t){return s(this,"a","href",t)}})},af03:function(t,e,i){var l=i("d039");t.exports=function(t){return l((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b866:function(t,e,i){"use strict";var l=i("7a23"),s={class:"my-btn border-button"};function a(t,e,i,a,n,o){return Object(l["z"])(),Object(l["g"])("button",s,[Object(l["G"])(t.$slots,"default",{},void 0,!0)])}var n={name:"MyButton"},o=(i("0dc3"),i("d959")),c=i.n(o);const r=c()(n,[["render",a],["__scopeId","data-v-27e5dabb"]]);e["a"]=r},bca4:function(t,e,i){"use strict";i("ee4a")},e991:function(t,e,i){"use strict";i("0644")},ee4a:function(t,e,i){},fb6a:function(t,e,i){"use strict";var l=i("23e7"),s=i("e8b5"),a=i("68ee"),n=i("861d"),o=i("23cb"),c=i("50c4"),r=i("fc6a"),h=i("8418"),d=i("b622"),u=i("1dde"),p=u("slice"),m=d("species"),g=[].slice,f=Math.max;l({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var i,l,d,u=r(this),p=c(u.length),y=o(t,p),b=o(void 0===e?p:e,p);if(s(u)&&(i=u.constructor,a(i)&&(i===Array||s(i.prototype))?i=void 0:n(i)&&(i=i[m],null===i&&(i=void 0)),i===Array||void 0===i))return g.call(u,y,b);for(l=new(void 0===i?Array:i)(f(b-y,0)),d=0;y<b;y++,d++)y in u&&h(l,d,u[y]);return l.length=d,l}})}}]);
//# sourceMappingURL=chunk-4126bc75.1e5d453a.js.map